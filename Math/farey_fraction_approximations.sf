#!/usr/bin/ruby

# Daniel "Trizen" Șuteu
# Date: 08 February 2018
# https://github.com/trizen

# Rational approximation of a real number, using Farey fractions.

# See also:
#   https://en.wikipedia.org/wiki/Farey_sequence
#   https://en.wikipedia.org/wiki/Stern%E2%80%93Brocot_tree

var r = sqrt(2)

var a = 0
var b = 1
var c = 1
var d = 0

for n in (1..30) {

    var m = (a+c)/(b+d)

    if (m < r) {
        (a,b) = m.nude
    }
    elsif (m > r) {
        (c,d) = m.nude
    }
    else {
        break
    }

    printf("%50s ≈ %s\n", r, m.as_frac)
}

__END__
 1.41421356237309504880168872420969807856967187538 ≈ 1/1
 1.41421356237309504880168872420969807856967187538 ≈ 2/1
 1.41421356237309504880168872420969807856967187538 ≈ 3/2
 1.41421356237309504880168872420969807856967187538 ≈ 4/3
 1.41421356237309504880168872420969807856967187538 ≈ 7/5
 1.41421356237309504880168872420969807856967187538 ≈ 10/7
 1.41421356237309504880168872420969807856967187538 ≈ 17/12
 1.41421356237309504880168872420969807856967187538 ≈ 24/17
 1.41421356237309504880168872420969807856967187538 ≈ 41/29
 1.41421356237309504880168872420969807856967187538 ≈ 58/41
 1.41421356237309504880168872420969807856967187538 ≈ 99/70
 1.41421356237309504880168872420969807856967187538 ≈ 140/99
 1.41421356237309504880168872420969807856967187538 ≈ 239/169
 1.41421356237309504880168872420969807856967187538 ≈ 338/239
 1.41421356237309504880168872420969807856967187538 ≈ 577/408
 1.41421356237309504880168872420969807856967187538 ≈ 816/577
 1.41421356237309504880168872420969807856967187538 ≈ 1393/985
 1.41421356237309504880168872420969807856967187538 ≈ 1970/1393
 1.41421356237309504880168872420969807856967187538 ≈ 3363/2378
 1.41421356237309504880168872420969807856967187538 ≈ 4756/3363
 1.41421356237309504880168872420969807856967187538 ≈ 8119/5741
 1.41421356237309504880168872420969807856967187538 ≈ 11482/8119
 1.41421356237309504880168872420969807856967187538 ≈ 19601/13860
 1.41421356237309504880168872420969807856967187538 ≈ 27720/19601
 1.41421356237309504880168872420969807856967187538 ≈ 47321/33461
 1.41421356237309504880168872420969807856967187538 ≈ 66922/47321
 1.41421356237309504880168872420969807856967187538 ≈ 114243/80782
 1.41421356237309504880168872420969807856967187538 ≈ 161564/114243
 1.41421356237309504880168872420969807856967187538 ≈ 275807/195025
 1.41421356237309504880168872420969807856967187538 ≈ 390050/275807
