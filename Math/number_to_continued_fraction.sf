#!/usr/bin/ruby

# A simple algorithm to convert a real number into a continued fraction representation.

func num2cfrac(n, r=100) {
    gather {
        r.times {
            var m = floor(n)
            take(m)
            var d = (n - m) || break
            n = 1/d
        }
    }
}

say num2cfrac(365.2422)
say num2cfrac(Num.pi, 13)

assert_eq(num2cfrac(365.2422),   [365, 4, 7, 1, 3, 4, 1, 1, 1, 2])
assert_eq(num2cfrac(Num.pi, 13), [3, 7, 15, 1, 292, 1, 1, 1, 2, 1, 3, 1, 14])
