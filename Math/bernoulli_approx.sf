#!/usr/bin/ruby

# Daniel "Trizen" Șuteu
# License: GPLv3
# Date: 21 December 2016
# https://github.com/trizen

# Two formulas for the nth Bernoulli number.

define π = Num.pi

#
## B_n = (-1)^(-n/2) * (-2)^(1 - n) * pi^(-n) * n! * zeta(n)
#
func bern_float(n) {
     pow(-1, n/2) * pow(-2, 1 - n) * pow(π, -n) * gamma(n+1) * ζ(n)
}

#
## B_n ~ -4 * (-1)^(-n/2) * exp(-n) * (n/2)^(n+1/2) * pi^(1/2 - n)
#
func bern_approx(n) {
    -4 * pow(-1, -n/2) * exp(-n) * pow(n/2, n + 1/2) * pow(π, 1/2 - n)
}

say "B(100) = #{bern(100)}"
say "B(100) ≈ #{bern_float(100)}"
say "B(100) ~ #{bern_approx(100)}"

say "\n=> Non-integers:"
say "B(13.456) ≈ #{bern_float(13.456)}"
say "B(13.456) ~ #{bern_approx(13.456)}"

__END__
B(100) = -2838224957069370695926415633648176473828468092801288212822853171446486511107028.13414341434143414341434143414341434143414341434143
B(100) ≈ -2838224957069370695926415633648176473828468092801288212822862696684076842336150.39945194858285835556894425666915623416155543960517
B(100) ~ -2835860762703397398020949735057451353509466593306268854504911977948508132016669.82973091845000537625767371788256775527273246806225

=> Non-integers:
B(13.456) ≈ 0.49103883572658300550097232792093938650387718835046+0.56407973611473892615680145336472924671043479915226i
B(13.456) ~ 0.48796415960788790554655727227309591844756623432802+0.56054770897658902648670480510654396210835865638832i
